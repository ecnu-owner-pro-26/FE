<view class="detail-container">
  <nav-bar title="æ ‘æ´è¯¦æƒ…" showBack="{{true}}"></nav-bar>

  <scroll-view scroll-y class="scroll-area">
    <view class="main-content">
      <view class="user-meta">
        <image class="avatar" src="{{info.avatar}}"></image>
        <view class="user-info">
          <text class="nickname">{{info.is_public ? info.nickname : 'åŒ¿åç‹®å­'}}</text>
          <text class="ip-tag">æ¥è‡ªï¼š{{info.ip_location || 'æœªçŸ¥'}}</text>
        </view>
      </view>

      <view class="text-content">
        <text class="title">{{info.title}}</text>
        <text class="body">{{info.content}}</text>
      </view>

      <view class="image-gallery" wx:if="{{info.images.length}}">
        <image 
          wx:for="{{info.images}}" 
          wx:key="*this" 
          src="{{item}}" 
          mode="widthFix" 
        ></image>
      </view>

      <view class="info-footer">
        <text>ğŸ“ {{info.location_name}}</text>
        <text>ğŸ‘ï¸ {{info.view_count || 0}} æµè§ˆ</text>
      </view>
    </view>

    <view class="interaction-bar">
      <like-button 
        isLiked="{{info.is_liked}}" 
        cnt="{{info.like_count}}"
        bind:change="onLikeTap"
      ></like-button>
      <text class="comment-total">å…± {{comments.length}} æ¡è¯„è®º</text>
    </view>

    <view class="comment-section">
      <view class="section-title">å…¨éƒ¨è¯„è®º</view>
      <block wx:for="{{comments}}" wx:key="id">
        <comment-item 
          item="{{item}}" 
          bind:reply="handleReplyTrigger"
        ></comment-item>
      </block>
      <view class="no-more" wx:if="{{comments.length === 0}}">æš‚æ— ç•™è¨€ï¼Œå¿«æ¥å ä¸ªæ²™å‘</view>
      <view style="height: 120rpx;"></view>
    </view>
  </scroll-view>

  <view class="bottom-input-bar">
    <input 
      class="input-box" 
      placeholder="{{inputPlaceholder}}" 
      value="{{commentText}}"
      focus="{{inputFocus}}"
      bindinput="onInput"      
      confirm-type="send"
      bindconfirm="submitComment"
    />
    <view class="send-btn" bindtap="submitComment">å‘é€</view>
  </view>
</view>